<!DOCTYPE html>
<html>
<head>
    <title>Minimal CCT Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    <h1>Minimal PostMessage Test</h1>

    <button onclick="sendMsg('esim_web_checkout_success')" style="font-size: 20px; padding: 15px; margin: 10px; background-color: #4CAF50; color: white;">
        Send SUCCESS
    </button>
    
    <button onclick="sendMsg('esim_web_checkout_failure')" style="font-size: 20px; padding: 15px; margin: 10px; background-color: #f44336; color: white;">
        Send FAILURE
    </button>

    <script>
        function sendMsg(message) {
            console.log('Attempting to send:', message);

            try {
                // This is the correct API to talk to the app
                CustomTabsClient.postMessage(message, null);
                
                // Show a success alert in the browser
                alert('Message SENT: ' + message);

            } catch (e) {
                console.error('Error sending message:', e);

                // Show an error alert in the browser
                alert('ERROR: CustomTabsClient.postMessage is not available.\n\nAre you in a Custom Tab?\n\n' + e);
            }
        }
    </script> </body>
</html>
